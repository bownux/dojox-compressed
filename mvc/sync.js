//>>built
define("dojox/mvc/sync",["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(f,j,s,i){function p(a,b,c,d,g,e,m,h,l){if(!t.equals(h,m)&&!("*"==d&&0>s.indexOf(c.get("properties")||[e],e)||"*"==d&&e in(l||{}))){d="*"==d?e:d;if(i("mvc-bindings-log-api"))var n=u(c,d,g,e);try{h=a?a(h,b):h}catch(o){i("mvc-bindings-log-api")&&console.log("Copy from"+n.join(" to ")+" was not done as an error is thrown in the converter.");return}i("mvc-bindings-log-api")&&console.log(n.reverse().join(" is being copied from: ")+
" (Value: "+h+" from "+m+")");f.isFunction(c.set)?c.set(d,h):c[d]=h}}var l=f.getObject("dojox.mvc",!0);i.add("mvc-bindings-log-api",(j.mvc||{}).debugBindings);var t;if(i("mvc-bindings-log-api"))var u=function(a,b,c,d){return[[c._setIdAttr||!c.declaredClass?c:c.declaredClass,d].join(":"),[a._setIdAttr||!a.declaredClass?a:a.declaredClass,b].join(":")]};j={from:1,to:2,both:3};t=function(a,b,c,d,g){var e=(g||{}).converter,m,h,j;e&&(m={source:a,target:c},h=e.format&&f.hitch(m,e.format),j=e.parse&&f.hitch(m,
e.parse));var n=[],o=[],q=f.mixin({},a.constraints,c.constraints),e=(g||{}).bindDirection||l.both;if(i("mvc-bindings-log-api"))var r=u(a,b,c,d);if("*"==d){if("*"!=b)throw Error("Unmatched wildcard is specified between source and target.");g=c.get("properties");if(!g){var g=[],k;for(k in c)c.hasOwnProperty(k)&&"_watchCallbacks"!=k&&g.push(k)}o=c.get("excludes")}else g=[b];e&l.from&&(f.isFunction(a.set)&&f.isFunction(a.watch)?n.push(a.watch.apply(a,("*"!=b?[b]:[]).concat([function(b,f,e){p(h,q,c,d,
a,b,f,e,o)}]))):i("mvc-bindings-log-api")&&console.log(r.reverse().join(" is not a stateful property. Its change is not reflected to ")+"."),s.forEach(g,function(b){if("*"!=d||!(b in(o||{}))){var e=f.isFunction(a.get)?a.get(b):a[b];p(h,q,c,"*"==d?b:d,a,b,void 0,e)}}));e&l.to&&(e&l.from||s.forEach(g,function(b){if("*"!=d||!(b in(o||{}))){var e=f.isFunction(c.get)?c.get(d):c[d];p(j,q,a,b,c,"*"==d?b:d,void 0,e)}}),f.isFunction(c.set)&&f.isFunction(c.watch)?n.push(c.watch.apply(c,("*"!=d?[d]:[]).concat([function(d,
e,f){p(j,q,a,b,c,d,e,f,o)}]))):i("mvc-bindings-log-api")&&console.log(r.join(" is not a stateful property. Its change is not reflected to ")+"."));i("mvc-bindings-log-api")&&console.log(r.join(" is bound to: "));k={};k.unwatch=k.remove=function(){for(var a=null;a=n.pop();)a.unwatch(),i("mvc-bindings-log-api")&&console.log(r.join(" is unbound from: "))};return k};f.mixin(l,j);return f.setObject("dojox.mvc.sync",f.mixin(t,{equals:function(a,b){return a===b||"number"==typeof a&&isNaN(a)&&"number"==typeof b&&
isNaN(b)||f.isFunction((a||{}).getTime)&&f.isFunction((b||{}).getTime)&&a.getTime()==b.getTime()||(f.isFunction((a||{}).equals)?a.equals(b):f.isFunction((b||{}).equals)?b.equals(a):!1)}},j))});