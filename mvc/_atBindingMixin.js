//>>built
define("dojox/mvc/_atBindingMixin","dojo/_base/array,dojo/_base/lang,dojo/_base/declare,dojo/has,./resolve,./sync".split(","),function(p,l,i,j,q,r){function s(a){var b;try{b=require("dijit/registry")}catch(c){return}for(a=a.domNode&&a.domNode.parentNode;a;){if(a=b.getEnclosingWidget(a)){var f=a._relTargetProp||"target";if((l.isFunction(a.get)?a.get(f):a[f])||f in a.constructor.prototype)return a}a=a&&a.domNode.parentNode}}function k(a,b,c,f,i){function k(){g.Two&&g.Two.unwatch();delete g.Two;var e=
d&&(l.isFunction(d.get)?d.get(m):d[m]),h=q(a,e),e=q(c,e);j("mvc-bindings-log-api")&&(!h||/^rel:/.test(a)&&!d)&&n(a,b);j("mvc-bindings-log-api")&&(!e||/^rel:/.test(c)&&!d)&&n(c,f);if(h&&e&&(!/^rel:/.test(a)&&!/^rel:/.test(c)||d))(!h.set||!h.watch)&&"*"==b?j("mvc-bindings-log-api")&&n(a,b):null==b?(l.isFunction(e.set)?e.set(f,h):e[f]=h,j("mvc-bindings-log-api")&&console.log("dojox/mvc/_atBindingMixin set "+h+" to: "+[e._setIdAttr||!e.declaredClass?e:e.declaredClass,f].join(":"))):g.Two=r(h,b,e,f,i)}
var g={},d=s(c),m=d&&d._relTargetProp||"target";k();if(d&&/^rel:/.test(a)||/^rel:/.test(c)&&l.isFunction(d.set)&&l.isFunction(d.watch))g.rel=d.watch(m,function(a,b,c){b!==c&&(j("mvc-bindings-log-api")&&console.log("Change in relative data binding target: "+d),k())});var o={};o.unwatch=o.remove=function(){for(var a in g)g[a]&&g[a].unwatch(),delete g[a]};return o}if(j("mvc-bindings-log-api"))var n=function(a,b){console.warn(b+" could not be resolved"+("string"==typeof a?" with "+a:"")+".")};i=i("dojox/mvc/_atBindingMixin",
null,{dataBindAttr:"data-mvc-bindings",_dbpostscript:function(a){var b=this._refs=(a||{}).refs||{},c;for(c in a)if("dojox.mvc.at"==(a[c]||{}).atsignature){var f=a[c];delete a[c];b[c]=f}},_startAtWatchHandles:function(){var a=this._refs;if(a){var b=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var c in a)a[c]&&"*"!=c&&(b[c]=k(a[c].target,a[c].targetProp,this,c,{bindDirection:a[c].bindDirection,converter:a[c].converter}));if("dojox.mvc.at"==(a["*"]||{}).atsignature)b["*"]=k(a["*"].target,
a["*"].targetProp,this,"*",{bindDirection:a["*"].bindDirection,converter:a["*"].converter})}},_stopAtWatchHandles:function(){for(var a in this._atWatchHandles)this._atWatchHandles[a].unwatch(),delete this._atWatchHandles[a]},_setAtWatchHandle:function(a,b){if("ref"==a)throw Error(this+": 1.7 ref syntax used in conjuction with 1.8 dojox/mvc/at syntax, which is not supported.");var c=this._atWatchHandles=this._atWatchHandles||{};c[a]&&(c[a].unwatch(),delete c[a]);this._excludes=this[a]=null;this._started?
c[a]=k(b.target,b.targetProp,this,a,{bindDirection:b.bindDirection,converter:b.converter}):this._refs[a]=b},_setBind:function(a){var a=eval("({"+a+"})"),b;for(b in a){var c=a[b];"dojox.mvc.at"!=(c||{}).atsignature?console.warn(b+" in "+dataBindAttr+" is not a data binding handle."):this._setAtWatchHandle(b,c)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var a=[],b;for(b in this._atWatchHandles)"*"!=b&&a.push(b);return a},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;
var a=["onClick"].concat(this.constructor._setterAttrs);p.forEach(["id","excludes","properties","ref","binding"],function(b){b=p.indexOf(a,b);0<=b&&a.splice(b,1)});return this.constructor._attribs=a}});i.prototype[i.prototype.dataBindAttr]="";return i});